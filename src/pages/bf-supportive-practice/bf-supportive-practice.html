<!--
  @author - Naseem Akhtar
  @since - 0.0.1
-->

<ion-header>
  <ion-navbar color="primary">
    <ion-title>Log breastfeeding supportive practice</ion-title>
  </ion-navbar>
</ion-header>


<ion-content padding scrollbar-y-auto>
  <ion-grid>
    <!-- heading part -->
    <ion-row style=" margin-bottom: 50px;">
      <ion-col col-6 col-sm-4>
        <ion-item>
          <ion-label stacked>Baby ID</ion-label>
          <ion-input [(ngModel)]="babyCode" disabled="true"></ion-input>
        </ion-item>
      </ion-col>

      <ion-col col-6 col-sm-4>
        <ion-label color="black" stacked>Date of feed
          <span class="text-color"> *</span>
        </ion-label>
        <ion-input *ngIf="!isWeb" [disabled]="dateOfBfsp" [readonly]="true" [(ngModel)]="dateOfBfsp" (ionFocus)="datePickerDialog()"
          [ngModelOptions]="{standalone: true}"></ion-input>

        <ion-datetime *ngIf="isWeb" [disabled]="dateOfBfsp" [(ngModel)]="dateOfBfsp" [ngModelOptions]="{standalone: true}" displayFormat="DD-MM-YYYY"
          [min]="minDate" [max]="maxDate" (ionChange)="dateConfirmation()"></ion-datetime>
        <!-- <ion-icon padding-top name="calendar" item-right></ion-icon> -->
      </ion-col>
    </ion-row>

    <div *ngFor="let bfsp of bfspList | orderByTimeBfsp; let i=index" margin class="form-border-box">
      <ion-row>
        <ion-col col col-sm-2 col-md-2 col-lg-1>
          <ion-label color="black" stacked>Time
            <span class="text-color"> *</span>
          </ion-label>
          <ion-input *ngIf="!isWeb" [readonly]="true" [(ngModel)]="bfsp.timeOfBFSP" 
            (ionFocus)="timePickerDialog(bfsp)" [ngModelOptions]="{standalone: true}"></ion-input>
          <ion-datetime *ngIf="isWeb" [(ngModel)]="bfsp.timeOfBFSP" [ngModelOptions]="{standalone: true}" 
            displayFormat="HH:mm" (ionChange)="validateTime(bfsp.timeOfBFSP, bfsp)"></ion-datetime>
        </ion-col>

        <ion-col col col-sm-10 col-md-5 col-lg-3>
          <ion-label color="black" stacked>Breastfeeding supportive practice performed</ion-label>
          <ion-select [(ngModel)]="bfsp.bfspPerformed" [ngModelOptions]="{standalone: true}" 
            (ionChange)="setPersonWhoPerformed(bfsp)" [selectOptions]="bfspPerformedConfig">
            <ion-option *ngFor="let item of bfSupportivePracticePerformedList" [value]="item.id">{{item.name}}</ion-option>
          </ion-select>
        </ion-col>

        <ion-col col col-sm-12 col-md-5 col-lg-3>
          <ion-label color="black" stacked>Person who performed the BFSP</ion-label>
          <ion-select id="person+i" [(ngModel)]="bfsp.personWhoPerformedBFSP" 
            [ngModelOptions]="{standalone: true}" [selectOptions]="personWhoPerformedBfspConfig"
            [disabled]="bfsp.bfspPerformed === 54 ? true : false">
            <ion-option *ngFor="let item of personWhoPerformedBSFPList" [value]="item.id">{{item.name}}</ion-option>
          </ion-select>
        </ion-col>

        <ion-col col col-sm-8 col-md-6 col-lg-3>
          <ion-label color="black" stacked>Duration (Min.)</ion-label>
          <ion-input type="number" [(ngModel)]="bfsp.bfspDuration" [pattern]="onlyNumberRegex" 
            [ngModelOptions]="{standalone: true}"  [disabled]="(bfsp.bfspPerformed === 54 || bfsp.bfspPerformed === 55)  ? true : false"></ion-input>
        </ion-col>

        <ion-col col-6 col-sm-2 col-md-2 col-lg-1 class="save_margin">
          <button padding ion-button block small (click)="save(bfsp, i)">
            {{bfsp.createdDate === null ? 'Save' : 'Update'}}
          </button>
        </ion-col>

        <ion-col col-6 col-sm-2 col-md-2 col-lg-1 class="delete_margin" text-center>
          <button [disabled]="bfsp.createdDate === null" 
            ion-button icon-only clear large (click)="delete(bfsp)">
            <ion-icon name="trash" color="danger"></ion-icon>
          </button>
        </ion-col>

      </ion-row>
    </div>


  </ion-grid>
  <!-- <h3 class="form-page-header" id="scrollHere">{{dataForBfspPage.selectedDate}}</h3>
  <ion-list>
    <div>
      <ion-item class="item-stable timeList" *ngFor="let bfsp of bfspList | orderByTimeBfsp; let i=index" text-wrap>
        <div>
          <div class="acordion-title" (click)="toggleGroup(bfsp)" [ngClass]="{active: isGroupShown(bfsp)}">
            <div>
              {{bfsp.timeOfBFSP}}
              <ion-icon color="success" style="float:right" [name]="isGroupShown(bfsp) ? 'md-remove' : 'md-add'"></ion-icon>
            </div>
          </div>

          <div style="margin-top:15px" *ngIf="isGroupShown(bfsp)">

            <ion-item>
              <ion-label color="black" stacked>Date of BFSP
                <span class="text-color"> *</span>
              </ion-label>
              <ion-input *ngIf="!isWeb" [readonly]="true" [(ngModel)]="bfsp.dateOfBFSP" (ionFocus)="datePickerDialog(bfsp)" [ngModelOptions]="{standalone: true}"></ion-input>
              <ion-datetime *ngIf="isWeb" [(ngModel)]="bfsp.dateOfBFSP" [ngModelOptions]="{standalone: true}" displayFormat="DD-MM-YYYY" [min]="minDate" [max]="maxDate"></ion-datetime>
              <ion-icon padding-top name="calendar" item-right></ion-icon>
            </ion-item>

            <ion-item>
              <ion-label color="black" stacked>Time at which BFSP occured
                <span class="text-color"> *</span>
              </ion-label>
              <ion-input *ngIf="!isWeb" [readonly]="true" [(ngModel)]="bfsp.timeOfBFSP" (ionFocus)="timePickerDialog(bfsp)" [ngModelOptions]="{standalone: true}"></ion-input>
              <ion-datetime *ngIf="isWeb" [(ngModel)]="bfsp.timeOfBFSP" [ngModelOptions]="{standalone: true}" displayFormat="HH:mm"></ion-datetime>
              <ion-icon padding-top name="time" item-right></ion-icon>
            </ion-item>
            <p class="error" *ngIf="">
              Please enter the time at which the BFSP occurred.
            </p>
            <ion-item>
              <ion-label color="black" stacked>Breastfeeding supportive practice performed</ion-label>
              <ion-select [(ngModel)]="bfsp.bfspPerformed" [ngModelOptions]="{standalone: true}" (ionChange)="setPersonWhoPerformed(bfsp)">
                <ion-option *ngFor="let item of bfSupportivePracticePerformedList" [value]="item.id">{{item.name}}</ion-option>
              </ion-select>
            </ion-item>
            <ion-item>
              <ion-label color="black" stacked>Person who performed the BFSP</ion-label>
              <ion-select id="person+i" [(ngModel)]="bfsp.personWhoPerformedBFSP" [ngModelOptions]="{standalone: true}" [disabled]="bfsp.bfspPerformed === 54 ? true : false">
                <ion-option *ngFor="let item of personWhoPerformedBSFPList" [value]="item.id">{{item.name}}</ion-option>
              </ion-select>
            </ion-item>
            <ion-item>
              <ion-label color="black" stacked>Duration of BFSP performed in minutes</ion-label>
              <ion-input type="number" [(ngModel)]="bfsp.bfspDuration" [pattern]="onlyNumberRegex" [ngModelOptions]="{standalone: true}"></ion-input>
            </ion-item>

            <ion-row padding>
              <ion-col>
                <button class="login-button" [disabled]="bfsp.id === null" ion-button block (click)="delete(bfsp)">Delete</button>
              </ion-col>
              <ion-col>
                <button class="login-button" ion-button block (click)="save(bfsp, i)">{{bfsp.id === null ? 'Save' : 'Update'}}</button>
              </ion-col>
            </ion-row>

          </div>
        </div>
      </ion-item>
    </div>
  </ion-list> -->
</ion-content>

<ion-footer ion-row align-center>
  <ion-col>
    <button ion-button block (click)="newBFSPForm()">New Entry</button>
  </ion-col>
  <ion-col>
    <button ion-button block (click)="saveAllExpressions()">Save / Update All</button>
  </ion-col>
</ion-footer>

