<!--
  Generated template for the ExpressionTimeFormPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar color="primary">
    <ion-title>Log expression / breastfeed</ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <ion-grid>
    <!-- heading part -->
    <ion-row style=" margin-bottom: 50px;">
      <ion-col col-6 col-sm-4>
        <ion-item>
          <ion-label stacked>Baby ID</ion-label>
          <ion-input [(ngModel)]="babyCode" disabled="true"></ion-input>
        </ion-item>
      </ion-col>

      <ion-col col-6 col-sm-4>
        <ion-label color="black" stacked>Date of feed
          <span class="text-color"> *</span>
        </ion-label>
        <ion-input *ngIf="!isWeb" [disabled]="dateOfExpressions" [readonly]="true" [(ngModel)]="dateOfExpressions" (ionFocus)="datePickerDialog()" [ngModelOptions]="{standalone: true}"></ion-input>
        <ion-datetime *ngIf="isWeb" [disabled]="dateOfExpressions" [(ngModel)]="dateOfExpressions" 
          [ngModelOptions]="{standalone: true}" displayFormat="DD-MM-YYYY" [min]="minDate" 
          [max]="maxDate" (ionChange)="dateConfirmation()"></ion-datetime>
        <!-- <ion-icon padding-top name="calendar" item-right></ion-icon> -->
      </ion-col>

      <ion-col col-12 col-sm-4>
        <ion-item>
          <ion-label stacked>Weight of baby (in grams)</ion-label>
          <ion-input type="number"></ion-input>
        </ion-item>
      </ion-col>
    </ion-row>

    <div *ngFor="let item of bFExpressions | orderByTimeExpressionFrom; let i=index" margin class="form-border-box">
      <ion-row>
        <ion-col col-3 col-sm-2 col-md-2 col-lg-1>
          <ion-label color="black" stacked>Time
            <span class="text-color"> *</span>
          </ion-label>
          
          <ion-input *ngIf="!isWeb" [disabled]="!dateOfExpressions" [readonly]="true" 
            [(ngModel)]="item.timeOfExpression" (ionFocus)="timePickerDialog(item)" 
              [ngModelOptions]="{standalone: true}"></ion-input>

          <ion-datetime *ngIf="isWeb" [disabled]="!dateOfExpressions" [(ngModel)]="item.timeOfExpression" 
            [ngModelOptions]="{standalone: true}" displayFormat="HH:mm" 
            (ionChange)="validateTime(item.timeOfExpression, item)"></ion-datetime>
          <!-- <ion-icon padding-top name="time" item-right></ion-icon> -->
        </ion-col>

        <ion-col col-9 col-sm-10 col-md-5 col-lg-3>
          <ion-label color="black" stacked>Method of expression</ion-label>
          <ion-select [(ngModel)]="item.methodOfExpression" [ngModelOptions]="{standalone: true}" 
            (ionChange)="checkVolumeOfMilkExpressed(item)" [selectOptions]="methodOfExpressionConfig">
            <ion-option *ngFor="let bfExpMethod of bfExpressionMethods" text-wrap [value]="bfExpMethod.id">{{bfExpMethod.name}}</ion-option>
          </ion-select>
        </ion-col>

        <ion-col col-12 col-sm-12 col-md-5 col-lg-3>
          <ion-label color="black" stacked>Location where expression occurred</ion-label>
          <ion-select [(ngModel)]="item.locationOfExpression" [ngModelOptions]="{standalone: true}"
            [selectOptions]="locationWhereExpressionOccuredConfig">
            <ion-option *ngFor="let locOfExpMethod of locationOfexpressionMethods" text-wrap [value]="locOfExpMethod.id">{{locOfExpMethod.name}}</ion-option>
          </ion-select>
        </ion-col>

        <ion-col col-8 col-sm-8 col-md-8 col-lg-3>
          <ion-label color="black" stacked>Volume of milk expressed from left and right breast (in ml,range 0-300)</ion-label>
          <ion-input type="tel" [disabled]="!item.methodOfExpression || item.methodOfExpression === 43" [pattern]="onlyNumberRegex"
            [(ngModel)]="item.volOfMilkExpressedFromLR"></ion-input>
        </ion-col>

        <ion-col col-2 col-sm-2 col-md-1 col-lg-1 class="save_margin">
          <button padding ion-button block small (click)="saveExpression(item)">{{item.createdDate === null ? 'Save' : 'Update'}}</button>
        </ion-col>

        <ion-col col-1 col-sm-1 col-md-1 col-lg-1 class="delete_margin" text-center>
          <button [disabled]="item.createdDate === null" ion-button icon-only clear large (click)="delete(item)">
            <ion-icon name="trash" color="danger"></ion-icon>
          </button>
        </ion-col>
      </ion-row>
    </div>
  </ion-grid>
</ion-content>

<ion-footer ion-row align-center>
  <ion-col>
    <button ion-button block (click)="newExpression()">New Expression</button>
  </ion-col>
  <ion-col>
    <button ion-button block (click)="saveAllExpressions()">Save / Update All</button>
  </ion-col>
</ion-footer>

